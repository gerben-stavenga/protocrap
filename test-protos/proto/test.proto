syntax = "proto2";

// Status represents the current state of an entity.
enum Status {
    // Default unknown status.
    UNKNOWN = 0;
    // Entity is active and operational.
    ACTIVE = 1;
    // Entity has been deactivated.
    INACTIVE = 2;
    // Entity is awaiting activation.
    PENDING = 3;
}

// Test is the main test message for protocrap testing.
// It contains various field types to exercise the parser.
message Test {
    // The x coordinate.
    optional uint32 x = 1;
    // The y coordinate as a fixed-width integer.
    optional fixed64 y = 2;
    // A string label for this test.
    optional string z = 3;
    optional Test child1 = 4;
    optional group Child2 = 5 {
        optional sint64 x = 1;
        optional Test recursive = 2;
    }

    message NestedMessage {
        optional sint64 x = 1;
        optional Test recursive = 2;
    }
    repeated NestedMessage nested_message = 6;
    repeated bytes rep_bytes = 7;
}

message DefaultsTest {
    optional int32 port = 1 [default = 8080];
    optional bool enabled = 2 [default = true];
    optional float ratio = 3 [default = 3.14];
    optional double precise = 4 [default = 2.71828];
    optional uint32 count = 5 [default = 42];
    optional int64 big_number = 6 [default = -9223372036854775808];
    optional float special_inf = 7 [default = inf];
    optional float special_neg_inf = 8 [default = -inf];
    optional float special_nan = 9 [default = nan];
    optional string greeting = 10 [default = "Hello, World!"];
    optional string multiline = 11 [default = "Line1\nLine2\tTabbed"];
    optional string escaped = 12 [default = "Quote: \" Backslash: \\"];
    optional bytes defaulted_bytes = 13 [default = "My \x0 byte array"];
    optional Status status = 14 [default = ACTIVE];
    optional Status status_no_default = 15;
}
